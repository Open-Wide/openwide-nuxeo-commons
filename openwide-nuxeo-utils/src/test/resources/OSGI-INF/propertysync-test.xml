<?xml version="1.0"?>
<component name="fr.openwide.nuxeo.commons.propertysync.test.contrib">

  <extension target="org.nuxeo.ecm.core.schema.TypeService" point="doctype">
    <facet name="Sync" />
  </extension>
  
  <extension target="fr.openwide.nuxeo.propertysync.service.PropertySyncService" point="rule">
    <rule name="descriptionFromParentFolder">
      <target>
        <!-- Enable copy on all Notes -->
        <type>Note</type>
        <!-- Enable copy on all documents with the Sync facet -->
        <facet>Sync</facet>
      </target>
      <metadata>
        <!-- Always copy the description from the closest parent Folder -->
        <setProperty xpath="dc:description" ancestorType="Folder" ancestorXpath="dc:title" />
        <!-- Copy the title from the closest parent Folder, only if it is not already set -->
        <setProperty xpath="dc:title" ancestorType="Folder" ancestorXpath="dc:title" onlyIfNull="true" />
      </metadata>
    </rule>
  </extension>
  
</component>